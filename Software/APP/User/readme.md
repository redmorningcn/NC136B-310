***
### 调试笔记：
5/27/2017 11:20:10 AM 

- 低层通讯，会定时产生异常。（调试时，在CPU_BOOLEAN  NMBS_FCxx_Handler (MODBUS_CH  *pch) 函数的else if未设置断点（异常时会执行）。）
- 因上问题。插入模型卡时。有可能造成模型设置失败。
- 与IC卡模块通讯正常，但是不发送数据。

08/08/2017 11:20:10 AM 
- 远程IAP功能。装置内存分区：
        1、boot区（0~0x10000）。
        2、主程序运行区（0x10000~0x40000）。
        3、IAP远程升级缓存区（0x40000~0x70000）;
        4、数据区（0x70000~0x80000）。
- 调整通讯协议。（CSNR协议分定义为包传输）。
        新协议V2.0，利用了协议控制字。（所有数据增加的应答）
        1、b0000：数据据传输，和原协议兼容。（由统计模块发起通讯）
        2、b0001：预留
        3、b0010：参数、状态操作。（由地面服务器发起通讯）
        4、b0011：IAP数据传输。
- 重新编写协议底层。
        1、将协议定义分析打包函数和拆包函数。
        2、定义通讯协议数据结构。协议关键信息包含在数据结构内。
          （如：源地址，目标地址，帧序号，控制字，数据区指针，接收区指针）
- 远程升级：
升级命令：   01：升级开始（考虑续传问题）
             02：升级包数据
             03：升级结束
             04：升级终止。

***
### 调试笔记：
09/04/2017 11:20:10 AM        
1、端点续传判断
   启动帧发送，如果序号不为0，则认为是断点续传。
   下位机判断下发的程序大小和以前发送的大小相同，则返回已存的程序信息，上位机根据
   上传信息判断。
   
### 调试笔记：
09/05/2017 09:59:10 AM        
1、远程油箱模型参数设置
命令：   #define		RUN_MODEL_PARA      0x400000		//运算模型卡
2、发送数据结构为stcCalcModel （408）
3、由于数据比较大，分包传输，前0-3（4字节）字节为命令字，第4-7字节为数据长度，
   后面跟不大于128字节数据。分包发送。
4、为和原版本兼容，如果设置的模型正确（valid == 1），则用此模型；否则按原模型操作。

    
   

        