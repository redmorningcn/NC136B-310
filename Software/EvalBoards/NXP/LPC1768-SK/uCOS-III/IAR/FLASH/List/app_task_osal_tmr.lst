###############################################################################
#
# IAR ANSI C/C++ Compiler V7.50.1.10123/W32 for ARM       26/Sep/2017  15:08:20
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        F:\iar\NC136B-310统计模块\Software\APP\Tasks\app_task_osal_tmr.c
#    Command line =  
#        F:\iar\NC136B-310统计模块\Software\APP\Tasks\app_task_osal_tmr.c -lCN
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\FLASH\List
#        --diag_suppress Pa050 -o
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\FLASH\Obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M3 -e --fpu=None --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        7.3\arm\INC\c\DLib_Config_Normal.h" -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\uCOS-III\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\BSP\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\BSP\IAR\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\BSP\OS\uCOS-III\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-CSP\MCU\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-CSP\MCU\NXP\LPC17xx\LPC1768\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-CSP\MCU\NXP\LPC17xx\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uCOS-III\Ports\ARM-Cortex-M3\Generic\IAR\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uCOS-III\Ports\ARM-Cortex-M3\CSP\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uCOS-III\Source\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-LIB\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-CPU\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-CPU\ARM-Cortex-M3\IAR\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-MB\Source\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-MB\Cfg\Template\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-MB\Os\uCOS-III\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\OSAL\OS\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\OSAL\Ports\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\APP\User\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\APP\Iap\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\APP\Protocol\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\APP\Tasks\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\APP\AES\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\BSP\OS\OSAL\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\CSB\include\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\BSP\Driver\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\User\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\User\APP\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\User\APP\MX25L1602Drv\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\User\APP\OCM800600T80\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\User\BSP\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\CardOperations\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\DataDeal\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\Driver\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\EquipmentOperations\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\Global\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\MastConTask\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\SlaveConTask\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\SpeedTest\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\csnr_package_deal\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\iap\
#        -I
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\tax\
#        -On --use_c++_inline -I "C:\Program Files (x86)\IAR Systems\Embedded
#        Workbench 7.3\arm\CMSIS\Include\"
#    List file    =  
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\FLASH\List\app_task_osal_tmr.lst
#    Object file  =  
#        F:\iar\NC136B-310统计模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\FLASH\Obj\app_task_osal_tmr.o
#
###############################################################################

F:\iar\NC136B-310统计模块\Software\APP\Tasks\app_task_osal_tmr.c
      1          /*******************************************************************************
      2           *   Filename:       app_task_tmr.c
      3           *   Revised:        All copyrights reserved to wumingshen.
      4           *   Revision:       v1.0
      5           *   Writer:	     wumingshen.
      6           *
      7           *   Description:    双击选中 tmr 按 Ctrl + H, 钩选 Match the case, Replace with
      8           *                   输入您要的名字，点击 Replace All
      9           *                   双击选中 Tmr 按 Ctrl + H, 钩选 Match the case, Replace with
     10           *                   输入您要的名字，点击 Replace All
     11           *                   双击选中 TMR 按 Ctrl + H, 钩选 Match the case, Replace with
     12           *                   输入您要的名字，点击 Replace All
     13           *                   在 app_cfg.h 中指定本任务的 优先级  （ APP_TASK_TMR_PRIO ）
     14           *                                            和 任务堆栈（ APP_TASK_TMR_STK_SIZE ）大小
     15           *                   在 app.h 中声明本任务的     创建函数（ void  App_TaskTmrCreate(void) ）
     16           *                                            和 看门狗标志位 （ WDTFLAG_Tmr ）
     17           *
     18           *   Notes:
     19           *     				E-mail: shenchangwei945@163.com
     20           *
     21           *******************************************************************************/
     22          
     23          /*******************************************************************************
     24           * INCLUDES
     25           */
     26          #define  SNL_APP_SOURCE
     27          #include <includes.h>
     28          #include "DS3231.h"
     29          #include "app.h"
     30          #include "bsp_timer.h"
     31          #include "os_cfg_app.h"
     32          
     33          #ifdef VSC_INCLUDE_SOURCE_FILE_NAMES
     34          const  CPU_CHAR  *app_task_tmr__c = "$Id: $";
     35          #endif
     36          
     37          #define APP_TASK_TMR_EN     DEF_ENABLED
     38          #if APP_TASK_TMR_EN == DEF_ENABLED
     39          /*******************************************************************************
     40           * CONSTANTS
     41           */
     42          #define CYCLE_TIME_TICKS            (OS_CFG_TICK_RATE_HZ * 1u)
     43          #define CYCLE_SAMPLE_MSEC_TICKS     (OS_CFG_TICK_RATE_HZ / 5)
     44          #define CYCLE_SAMPLE_SEC_TICKS      (OS_CFG_TICK_RATE_HZ * 5u)
     45          #define CYCLE_SAMPLE_MIN_TICKS      (OS_CFG_TICK_RATE_HZ * 60u)
     46          #define CYCLE_SAMPLE_TICKS          (OS_CFG_TICK_RATE_HZ * 2u)
     47               
     48          /*******************************************************************************
     49           * MACROS
     50           */
     51          
     52          /*******************************************************************************
     53           * TYPEDEFS
     54           */
     55          extern     stcSysCtrl   sCtrl;
     56          
     57          /*******************************************************************************
     58           * LOCAL VARIABLES
     59           */
     60          
     61          #if ( OSAL_EN == DEF_ENABLED )
     62          #else
     63          /***********************************************
     64          * 描述： 任务控制块（TCB）
     65          */
     66          static  OS_TCB   AppTaskTmrTCB;
     67          
     68          /***********************************************
     69          * 描述： 任务堆栈（STACKS）
     70          */
     71          static  CPU_STK  AppTaskTmrStk[ APP_TASK_TMR_STK_SIZE ];
     72          
     73          #endif
     74          /*******************************************************************************
     75           * GLOBAL VARIABLES
     76           */
     77          
     78          /*******************************************************************************
     79           * LOCAL FUNCTIONS
     80           */
     81          
     82          /*******************************************************************************
     83           * GLOBAL FUNCTIONS
     84           */
     85          
     86          /*******************************************************************************
     87           * EXTERN VARIABLES
     88           */
     89          
     90          /*******************************************************************************/
     91          
     92          /*******************************************************************************
     93           * 名    称： AppTaskTmr
     94           * 功    能： 控制任务
     95           * 入口参数： p_arg - 由任务创建函数传入
     96           * 出口参数： 无
     97           * 作　 　者： wumingshen.
     98           * 创建日期： 2015-02-05
     99           * 修    改：
    100           * 修改日期：
    101           *******************************************************************************/
    102          

   \                                 In section .text, align 2, keep-with-next
    103          osalEvt  TaskTmrEvtProcess(INT8U task_id, osalEvt task_event)
    104          {
   \                     TaskTmrEvtProcess: (+1)
   \   00000000   0xB530             PUSH     {R4,R5,LR}
   \   00000002   0xB083             SUB      SP,SP,#+12
   \   00000004   0x0004             MOVS     R4,R0
   \   00000006   0x000D             MOVS     R5,R1
    105              OS_ERR      err;
    106          //    static BOOL     chang_flag = FALSE;
    107              
    108              /***********************************************
    109              * 描述： 本任务看门狗标志置位
    110              */
    111              OS_FlagPost ((OS_FLAG_GRP *)&WdtFlagGRP,
    112                           (OS_FLAGS     ) WDT_FLAG_TMR,
    113                           (OS_OPT       ) OS_OPT_POST_FLAG_SET,
    114                           (CPU_TS       ) 0,
    115                           (OS_ERR      *) &err);    
   \   00000008   0xA801             ADD      R0,SP,#+4
   \   0000000A   0x9000             STR      R0,[SP, #+0]
   \   0000000C   0x2300             MOVS     R3,#+0
   \   0000000E   0x2200             MOVS     R2,#+0
   \   00000010   0x2104             MOVS     R1,#+4
   \   00000012   0x....             LDR.N    R0,??DataTable1
   \   00000014   0x.... 0x....      BL       OS_FlagPost
    116            
    117              /***************************************************************************
    118              * 描述： 统计模块和测量某块通讯定时器，统计装置定时发送数据查询指令，超时发送
    119              COMM_EVT_FLAG_MTR_TIMEOUT 标示。定时500ms通讯一次。
    120              */
    121              if( task_event & OS_EVT_TMR_MTR ) {     
   \   00000018   0x06A8             LSLS     R0,R5,#+26
   \   0000001A   0xD510             BPL.N    ??TaskTmrEvtProcess_0
    122                  OS_FlagPost(( OS_FLAG_GRP *)&sCtrl.Os.CommEvtFlagGrp,
    123                              ( OS_FLAGS     ) COMM_EVT_FLAG_MTR_TIMEOUT,
    124                              ( OS_OPT       ) OS_OPT_POST_FLAG_SET,
    125                              ( CPU_TS       ) 0,
    126                              ( OS_ERR      *) &err);        
   \   0000001C   0xA801             ADD      R0,SP,#+4
   \   0000001E   0x9000             STR      R0,[SP, #+0]
   \   00000020   0x2300             MOVS     R3,#+0
   \   00000022   0x2200             MOVS     R2,#+0
   \   00000024   0x2108             MOVS     R1,#+8
   \   00000026   0x....             LDR.N    R0,??DataTable1_1
   \   00000028   0x.... 0x....      BL       OS_FlagPost
    127          
    128          
    129                 osal_start_timerEx(  OS_TASK_ID_TMR,     //计数器重新开始
    130                              OS_EVT_TMR_MTR,
    131                              OS_TICKS_PER_SEC);        
   \   0000002C   0xF44F 0x727A      MOV      R2,#+1000
   \   00000030   0x2120             MOVS     R1,#+32
   \   00000032   0x2001             MOVS     R0,#+1
   \   00000034   0x.... 0x....      BL       osal_start_timerEx
    132                  
    133                  return ( task_event ^ OS_EVT_TMR_MTR );
   \   00000038   0xF095 0x0020      EORS     R0,R5,#0x20
   \   0000003C   0xE096             B.N      ??TaskTmrEvtProcess_1
    134              }
    135              
    136              /***************************************************************************
    137              * 描述： 统计模块和无线发送模块通讯定时器，
    138              COMM_EVT_FLAG_DTU_TIMEOUT 标示。
    139              */
    140              if( task_event & OS_EVT_TMR_DTU ) { 
   \                     ??TaskTmrEvtProcess_0: (+1)
   \   0000003E   0x0668             LSLS     R0,R5,#+25
   \   00000040   0xD510             BPL.N    ??TaskTmrEvtProcess_2
    141                  OS_FlagPost(( OS_FLAG_GRP *)&sCtrl.Os.CommEvtFlagGrp,
    142                              ( OS_FLAGS     ) COMM_EVT_FLAG_DTU_TIMEOUT,
    143                              ( OS_OPT       ) OS_OPT_POST_FLAG_SET,
    144                              ( CPU_TS       ) 0,
    145                              ( OS_ERR      *) &err);  
   \   00000042   0xA801             ADD      R0,SP,#+4
   \   00000044   0x9000             STR      R0,[SP, #+0]
   \   00000046   0x2300             MOVS     R3,#+0
   \   00000048   0x2200             MOVS     R2,#+0
   \   0000004A   0x2110             MOVS     R1,#+16
   \   0000004C   0x....             LDR.N    R0,??DataTable1_1
   \   0000004E   0x.... 0x....      BL       OS_FlagPost
    146              
    147                   osal_start_timerEx(  OS_TASK_ID_TMR,     //计数器重新开始
    148                                        OS_EVT_TMR_DTU,
    149                                        OS_TICKS_PER_SEC*15); 
   \   00000052   0xF643 0x2298      MOVW     R2,#+15000
   \   00000056   0x2140             MOVS     R1,#+64
   \   00000058   0x2001             MOVS     R0,#+1
   \   0000005A   0x.... 0x....      BL       osal_start_timerEx
    150                  
    151                  return ( task_event ^ OS_EVT_TMR_DTU );
   \   0000005E   0xF095 0x0040      EORS     R0,R5,#0x40
   \   00000062   0xE083             B.N      ??TaskTmrEvtProcess_1
    152              }
    153              
    154              /***************************************************************************
    155              * 描述： 统计模块和无线发送模块通讯定时器，
    156              COMM_EVT_FLAG_DTU_TIMEOUT 标示。
    157              */
    158              if( task_event & OS_EVT_TMR_OTR ) {        
   \                     ??TaskTmrEvtProcess_2: (+1)
   \   00000064   0x0628             LSLS     R0,R5,#+24
   \   00000066   0xD510             BPL.N    ??TaskTmrEvtProcess_3
    159                  OS_FlagPost(( OS_FLAG_GRP *)&sCtrl.Os.CommEvtFlagGrp,
    160                              ( OS_FLAGS     ) COMM_EVT_FLAG_OTR_TIMEOUT,
    161                              ( OS_OPT       ) OS_OPT_POST_FLAG_SET,
    162                              ( CPU_TS       ) 0,
    163                              ( OS_ERR      *) &err);        
   \   00000068   0xA801             ADD      R0,SP,#+4
   \   0000006A   0x9000             STR      R0,[SP, #+0]
   \   0000006C   0x2300             MOVS     R3,#+0
   \   0000006E   0x2200             MOVS     R2,#+0
   \   00000070   0x2120             MOVS     R1,#+32
   \   00000072   0x....             LDR.N    R0,??DataTable1_1
   \   00000074   0x.... 0x....      BL       OS_FlagPost
    164          
    165                   osal_start_timerEx(  OS_TASK_ID_TMR,     //计数器重新开始
    166                                OS_EVT_TMR_OTR,
    167                                OS_TICKS_PER_SEC*2.5);                             
   \   00000078   0xF640 0x12C4      MOVW     R2,#+2500
   \   0000007C   0x2180             MOVS     R1,#+128
   \   0000007E   0x2001             MOVS     R0,#+1
   \   00000080   0x.... 0x....      BL       osal_start_timerEx
    168          
    169                   
    170                  return ( task_event ^ OS_EVT_TMR_OTR );
   \   00000084   0xF095 0x0080      EORS     R0,R5,#0x80
   \   00000088   0xE070             B.N      ??TaskTmrEvtProcess_1
    171              }
    172              
    173              /***************************************************************************
    174              * 描述： 超时操作 TAX 
    175              COMM_EVT_FLAG_DTU_TIMEOUT 标示。
    176              */
    177              if( task_event & OS_EVT_TMR_TAX ) {            
   \                     ??TaskTmrEvtProcess_3: (+1)
   \   0000008A   0x05E8             LSLS     R0,R5,#+23
   \   0000008C   0xD511             BPL.N    ??TaskTmrEvtProcess_4
    178          
    179                  OS_FlagPost(( OS_FLAG_GRP *)&sCtrl.Os.CommEvtFlagGrp,
    180                              ( OS_FLAGS     ) COMM_EVT_FLAG_TAX_TIMEOUT,
    181                              ( OS_OPT       ) OS_OPT_POST_FLAG_SET,
    182                              ( CPU_TS       ) 0,
    183                              ( OS_ERR      *) &err);        
   \   0000008E   0xA801             ADD      R0,SP,#+4
   \   00000090   0x9000             STR      R0,[SP, #+0]
   \   00000092   0x2300             MOVS     R3,#+0
   \   00000094   0x2200             MOVS     R2,#+0
   \   00000096   0x2180             MOVS     R1,#+128
   \   00000098   0x....             LDR.N    R0,??DataTable1_1
   \   0000009A   0x.... 0x....      BL       OS_FlagPost
    184                  
    185                  osal_start_timerEx(  OS_TASK_ID_TMR,     //计数器重新开始
    186                            OS_EVT_TMR_TAX,
    187                            OS_TICKS_PER_SEC*10);                             
   \   0000009E   0xF242 0x7210      MOVW     R2,#+10000
   \   000000A2   0xF44F 0x7180      MOV      R1,#+256
   \   000000A6   0x2001             MOVS     R0,#+1
   \   000000A8   0x.... 0x....      BL       osal_start_timerEx
    188          
    189                  return ( task_event ^ OS_EVT_TMR_TAX );
   \   000000AC   0xF495 0x7080      EORS     R0,R5,#0x100
   \   000000B0   0xE05C             B.N      ??TaskTmrEvtProcess_1
    190              }
    191          
    192              /***************************************************************************
    193              * 描述： 统计模块和无线发送模块通讯定时器，
    194              COMM_EVT_FLAG_DTU_TIMEOUT 标示。
    195              */
    196              if( task_event & OS_EVT_TMR_SEC ) {        
   \                     ??TaskTmrEvtProcess_4: (+1)
   \   000000B2   0x0768             LSLS     R0,R5,#+29
   \   000000B4   0xD559             BPL.N    ??TaskTmrEvtProcess_5
    197                      sCtrl.Dtu.ConnectTimeOut++;
   \   000000B6   0x....             LDR.N    R0,??DataTable1_2
   \   000000B8   0xF890 0x050D      LDRB     R0,[R0, #+1293]
   \   000000BC   0xF010 0x0180      ANDS     R1,R0,#0x80
   \   000000C0   0x1C40             ADDS     R0,R0,#+1
   \   000000C2   0xF010 0x007F      ANDS     R0,R0,#0x7F
   \   000000C6   0x4308             ORRS     R0,R0,R1
   \   000000C8   0x....             LDR.N    R1,??DataTable1_2
   \   000000CA   0xF881 0x050D      STRB     R0,[R1, #+1293]
    198                      sCtrl.Mtr.ConnectTimeOut++;
   \   000000CE   0x....             LDR.N    R0,??DataTable1_2
   \   000000D0   0xF890 0x03AC      LDRB     R0,[R0, #+940]
   \   000000D4   0xF010 0x0180      ANDS     R1,R0,#0x80
   \   000000D8   0x1C40             ADDS     R0,R0,#+1
   \   000000DA   0xF010 0x007F      ANDS     R0,R0,#0x7F
   \   000000DE   0x4308             ORRS     R0,R0,R1
   \   000000E0   0x....             LDR.N    R1,??DataTable1_2
   \   000000E2   0xF881 0x03AC      STRB     R0,[R1, #+940]
    199                      sCtrl.Otr.ConnectTimeOut++;
   \   000000E6   0x....             LDR.N    R0,??DataTable1_2
   \   000000E8   0xF890 0x066E      LDRB     R0,[R0, #+1646]
   \   000000EC   0xF010 0x0180      ANDS     R1,R0,#0x80
   \   000000F0   0x1C40             ADDS     R0,R0,#+1
   \   000000F2   0xF010 0x007F      ANDS     R0,R0,#0x7F
   \   000000F6   0x4308             ORRS     R0,R0,R1
   \   000000F8   0x....             LDR.N    R1,??DataTable1_2
   \   000000FA   0xF881 0x066E      STRB     R0,[R1, #+1646]
    200                      
    201                      if( sCtrl.Dtu.ConnectTimeOut > 1)
   \   000000FE   0x....             LDR.N    R0,??DataTable1_2
   \   00000100   0xF890 0x050D      LDRB     R0,[R0, #+1293]
   \   00000104   0xF010 0x007F      ANDS     R0,R0,#0x7F
   \   00000108   0x2802             CMP      R0,#+2
   \   0000010A   0xDB07             BLT.N    ??TaskTmrEvtProcess_6
    202                          sCtrl.Dtu.ConnectFlag = 0;
   \   0000010C   0x....             LDR.N    R0,??DataTable1_2
   \   0000010E   0xF890 0x050D      LDRB     R0,[R0, #+1293]
   \   00000112   0xF010 0x007F      ANDS     R0,R0,#0x7F
   \   00000116   0x....             LDR.N    R1,??DataTable1_2
   \   00000118   0xF881 0x050D      STRB     R0,[R1, #+1293]
    203                      
    204                      if( sCtrl.Mtr.ConnectTimeOut > 1)
   \                     ??TaskTmrEvtProcess_6: (+1)
   \   0000011C   0x....             LDR.N    R0,??DataTable1_2
   \   0000011E   0xF890 0x03AC      LDRB     R0,[R0, #+940]
   \   00000122   0xF010 0x007F      ANDS     R0,R0,#0x7F
   \   00000126   0x2802             CMP      R0,#+2
   \   00000128   0xDB07             BLT.N    ??TaskTmrEvtProcess_7
    205                          sCtrl.Mtr.ConnectFlag = 0;
   \   0000012A   0x....             LDR.N    R0,??DataTable1_2
   \   0000012C   0xF890 0x03AC      LDRB     R0,[R0, #+940]
   \   00000130   0xF010 0x007F      ANDS     R0,R0,#0x7F
   \   00000134   0x....             LDR.N    R1,??DataTable1_2
   \   00000136   0xF881 0x03AC      STRB     R0,[R1, #+940]
    206                      
    207                      if( sCtrl.Otr.ConnectTimeOut > 1)
   \                     ??TaskTmrEvtProcess_7: (+1)
   \   0000013A   0x....             LDR.N    R0,??DataTable1_2
   \   0000013C   0xF890 0x066E      LDRB     R0,[R0, #+1646]
   \   00000140   0xF010 0x007F      ANDS     R0,R0,#0x7F
   \   00000144   0x2802             CMP      R0,#+2
   \   00000146   0xDB07             BLT.N    ??TaskTmrEvtProcess_8
    208                          sCtrl.Otr.ConnectFlag = 0;
   \   00000148   0x....             LDR.N    R0,??DataTable1_2
   \   0000014A   0xF890 0x066E      LDRB     R0,[R0, #+1646]
   \   0000014E   0xF010 0x007F      ANDS     R0,R0,#0x7F
   \   00000152   0x....             LDR.N    R1,??DataTable1_2
   \   00000154   0xF881 0x066E      STRB     R0,[R1, #+1646]
    209          
    210                      osal_start_timerEx(  OS_TASK_ID_TMR,     //计数器重新开始
    211                              OS_EVT_TMR_SEC,
    212                              OS_TICKS_PER_SEC);        
   \                     ??TaskTmrEvtProcess_8: (+1)
   \   00000158   0xF44F 0x727A      MOV      R2,#+1000
   \   0000015C   0x2104             MOVS     R1,#+4
   \   0000015E   0x2001             MOVS     R0,#+1
   \   00000160   0x.... 0x....      BL       osal_start_timerEx
    213                      
    214                  return ( task_event ^ OS_EVT_TMR_SEC );
   \   00000164   0xF095 0x0004      EORS     R0,R5,#0x4
   \   00000168   0xE000             B.N      ??TaskTmrEvtProcess_1
    215              }
    216              return 0;
   \                     ??TaskTmrEvtProcess_5: (+1)
   \   0000016A   0x2000             MOVS     R0,#+0
   \                     ??TaskTmrEvtProcess_1: (+1)
   \   0000016C   0xBD3E             POP      {R1-R5,PC}       ;; return
    217          }
    218          
    219          /*******************************************************************************
    220           * 名    称： APP_TmrInit
    221           * 功    能： 任务初始化
    222           * 入口参数： 无
    223           * 出口参数： 无
    224           * 作　　者： wumingshen.
    225           * 创建日期： 2015-03-28
    226           * 修    改：
    227           * 修改日期：
    228           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    229          void TaskInitTmr(void)
    230          {
   \                     TaskInitTmr: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    231              /***********************************************
    232              * 描述： 初始化
    233              */    
    234                 
    235              /***********************************************
    236              * 描述： 在看门狗标志组注册本任务的看门狗标志
    237              */
    238              WdtFlags |= WDT_FLAG_TMR;
   \   00000002   0x....             LDR.N    R0,??DataTable1_3
   \   00000004   0x6800             LDR      R0,[R0, #+0]
   \   00000006   0xF050 0x0004      ORRS     R0,R0,#0x4
   \   0000000A   0x....             LDR.N    R1,??DataTable1_3
   \   0000000C   0x6008             STR      R0,[R1, #+0]
    239              /*************************************************
    240              * 描述：启动事件查询
    241              */
    242              //2017一段时间后，无通讯。
    243              
    244          //    osal_start_timerRl( OS_TASK_ID_TMR, OS_EVT_TMR_SEC, OS_TICKS_PER_SEC);   
    245          //    osal_start_timerRl( OS_TASK_ID_TMR, OS_EVT_TMR_MTR, OS_TICKS_PER_SEC*1 );  //统计模块和测量装置通讯定时器  500ms
    246          //    osal_start_timerRl( OS_TASK_ID_TMR, OS_EVT_TMR_DTU, OS_TICKS_PER_SEC*2 );  //统计装置和无线发送模块定时器  500ms
    247          //    osal_start_timerRl( OS_TASK_ID_TMR, OS_EVT_TMR_OTR, OS_TICKS_PER_SEC*10 ); //统计模块和IC卡模块通讯定时器  500ms  
    248              
    249              osal_start_timerEx( OS_TASK_ID_TMR, OS_EVT_TMR_SEC,OS_TICKS_PER_SEC);   
   \   0000000E   0xF44F 0x727A      MOV      R2,#+1000
   \   00000012   0x2104             MOVS     R1,#+4
   \   00000014   0x2001             MOVS     R0,#+1
   \   00000016   0x.... 0x....      BL       osal_start_timerEx
    250              osal_start_timerEx( OS_TASK_ID_TMR, OS_EVT_TMR_MTR,OS_TICKS_PER_SEC*1 ); 
   \   0000001A   0xF44F 0x727A      MOV      R2,#+1000
   \   0000001E   0x2120             MOVS     R1,#+32
   \   00000020   0x2001             MOVS     R0,#+1
   \   00000022   0x.... 0x....      BL       osal_start_timerEx
    251              osal_start_timerEx( OS_TASK_ID_TMR, OS_EVT_TMR_DTU,OS_TICKS_PER_SEC*2 ); 
   \   00000026   0xF44F 0x62FA      MOV      R2,#+2000
   \   0000002A   0x2140             MOVS     R1,#+64
   \   0000002C   0x2001             MOVS     R0,#+1
   \   0000002E   0x.... 0x....      BL       osal_start_timerEx
    252              osal_start_timerEx( OS_TASK_ID_TMR, OS_EVT_TMR_OTR,OS_TICKS_PER_SEC*10 );
   \   00000032   0xF242 0x7210      MOVW     R2,#+10000
   \   00000036   0x2180             MOVS     R1,#+128
   \   00000038   0x2001             MOVS     R0,#+1
   \   0000003A   0x.... 0x....      BL       osal_start_timerEx
    253          
    254          }
   \   0000003E   0xBD01             POP      {R0,PC}          ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   0x........         DC32     WdtFlagGRP

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_1:
   \   00000000   0x........         DC32     sCtrl+0x7FC

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_2:
   \   00000000   0x........         DC32     sCtrl

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_3:
   \   00000000   0x........         DC32     WdtFlags
    255          
    256          /*******************************************************************************
    257           * 				                    end of file                                *
    258           *******************************************************************************/
    259          #endif

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   TaskInitTmr
         8   -> osal_start_timerEx
      24   TaskTmrEvtProcess
        24   -> OS_FlagPost
        24   -> osal_start_timerEx


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable1
       4  ??DataTable1_1
       4  ??DataTable1_2
       4  ??DataTable1_3
      64  TaskInitTmr
     366  TaskTmrEvtProcess

 
 446 bytes in section .text
 
 446 bytes of CODE memory

Errors: none
Warnings: 1
